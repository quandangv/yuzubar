yambar: "%{O40}${options} %{c} ${wm} %{r} ${wifi} ${volume} ${status} %{B${bar-bg} O40}"
  fg: #532
  bg:$ color L+0.7 ${dep fg}
  bar-bg: -
  sep: "%{B${dep bar-bg} O10}"

  warn_module.background.norm:$ dep bg
  warn_module.foreground.norm:$ dep fg
  warn_module:H ${dep sep}${format} ${text}
    smooth_level:$i cache 5 ${smooth 0.3 ${map 1 30 ${dep level}}}
    background:$ gradient "0:${norm} 30:${warn}" ${dep smooth_level}
      warn: #B32
    foreground:$ gradient "0:${norm} 30:${warn}" ${dep smooth_level}
      warn: #FFF
    format:$ arrcache 31 ${dep smooth_level} "%{B${dep background} F${dep foreground}}"

  simple_module:H$ clone warn_module
    percentage:L$ cache ${dep cache_time} ${dep calculation}
    cache_time:$ var 1000

  options:$ refcache "${raw.mode}${greeting.datetime.mode}" 20000 "${dep sep}%{F${dep fg} U${dep fg}}${raw}${dep sep}"
    raw:$ save ${mode} ${cmd "./scripts/options.sh ${} ${mode} ${dep greeting}" ? N/A}
      mode:$ var closed
    greeting:$ refcache ${datetime.mode} 10000 ${raw}
      raw: Hi %{T2}${env USER}%{T-}, ${dep datetime}
      datetime:$ save mode ${cmd "./scripts/date.sh ${} ${mode} ${stonks}" ? N/A}
        stonks:$ save cache ${poll "./scripts/stonks.sh ${name}" ? ${cache}}
          name: GME


  wm:$ cache 200 ${raw}
    raw:$ save cache ${poll ./scripts/bspwm.sh ? ${cache}}

  wifi.light-fg:$ color L+0.3 ${dep fg}
  wifi: ${dep sep}%{F${dep fg}} ${raw}
    raw:$ save cache ${poll "./scripts/wifi.sh 4 %{F${dep light-fg}}" ? ${cache}}

  volume.light-fg:$ color L=0.7 ${dep fg}
  volume: ${dep sep}%{F${dep fg}} ${raw}
    raw:$ save cache ${poll "./scripts/volume.sh 10 %{F${dep light-fg}}" ? ${cache}}

  status:$ clone warn_module
    text:$ save ${dep state} ${save cache ${poll}} ;
      poll:$ poll "./scripts/performance.sh ${} ${reload_time} ${bat_type} ${thermal_zone}"  ? ${dep cache}
        reload_time: 2
        bat_type: BAT1
        thermal_zone: 0
    state:$ var 0
    level: ${dep state}

  cpu:$ clone simple_module
    text: cpu %{T2}${dep percentage}%{T-}
    level:$ map 79:80 1 ${dep percentage}
    calculation:$ save ${last_status} ${cmd "./scripts/cpu.sh ${last_status}" ? N/A}
      last_status:$ var "0 0"

  memory:$ clone simple_module
    text: ram %{T2}${dep percentage}%{T-}
    cache_time:= 2000
    level:$ map 89:90 1 ${dep percentage}
    calculation:$ cmd "./scripts/memory.sh" ? N/A

  temp:$ clone simple_module
    text: %{T2}${dep percentage}%{T-}Â°C
    level:$ map 69:70 1 ${dep percentage}
    calculation:$ cmd "./scripts/temp.sh ${zone}" ? N/A
      zone: 0

  battery:$ clone simple_module
    text: bat %{T2}${dep percentage}%{T-}
    cache_time:= 20000
    level:$ map 21:20 1 ${dep percentage}
    calculation:$ cmd "./scripts/battery.sh ${bat_name}" ? N/A
      bat_name: BAT1
